<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Audrey Troutt</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link href='http://fonts.googleapis.com/css?family=Cabin|Open+Sans|Lato:300,400,300italic|Vollkorn:400italic,400' rel='stylesheet' type='text/css'>
    <link href='stylesheets/style.css' rel='stylesheet' type='text/css'>
		<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
		<script src='javascripts/scrollReveal.js'></script>
	  <script>
	      window.scrollReveal = new scrollReveal();
	  </script>
    <script src="https://analytics.ahrefs.com/analytics.js" data-key="nIvdLXXYUGFBoBZE6PtVTg" async></script>
  </head>
  <body>
    <div class="content">
      <header>
        <h1>Audrey Troutt</h1>
        <p>Startup CTO & hands-on engineering leader building products, teams, and cultures that scale.</p>
        <nav id="main-nav">
          <a href="#about" class="nav-link">About</a>           <!-- Remains a hash link for index.html's own JS -->
          <a href="speaking.html" class="nav-link">Speaking</a> <!-- Points to speaking.html -->
          <a href="writing.html" class="nav-link">Writing</a>   <!-- Points to writing.html -->
          <a href="teaching.html" class="nav-link">Teaching</a> <!-- Points to teaching.html -->
        </nav>
      </header>
      <!-- Content sections are now direct children of div.content -->
      <section id="content-about"></section>
      <footer>
        <ul>
          <li><a class="buttons github" href="https://github.com/atroutt">GitHub</a></li>
            <li><a class="buttons speakerdeck" href="https://speakerdeck.com/atroutt/">Speaker Deck</a></li>
            <li><a class="buttons linkedin" href="http://www.linkedin.com/in/audreytroutt">LinkedIn</a></li>
            <li><a class="buttons twitter" href="https://bsky.app/profile/auditty.bsky.social">Bluesky</a></li>
            <li><a class="buttons news" href="https://technical.ly/?s=audrey+troutt">News</a></li>
          </ul>
        </footer>
    <!-- The div.content closing tag was here, it should remain to wrap header, sections, and footer -->
    </div>
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>

    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-19828277-1");
    pageTracker._trackPageview();
    } catch(err) {}
    </script>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const navLinks = document.querySelectorAll('.nav-link');
      // Only #content-about is relevant now
      const contentAboutSection = document.getElementById('content-about');

      async function loadContent(pageName) {
        if (pageName !== 'about') {
          // This script now only handles the 'about' page content for index.html
          console.log('loadContent called with pageName:', pageName, '- only "about" is handled by index.html script.');
          // Optionally hide #content-about if other pages were linked here, though not expected
          if(contentAboutSection) contentAboutSection.style.display = 'none';
          return;
        }

        if (!contentAboutSection) {
          console.error('Target element "content-about" not found.');
          return;
        }
        
        // Ensure only #content-about is visible
        contentAboutSection.style.display = 'block';
        // Hide other sections if they existed (though they are removed from HTML)
        // For example, if there was a contentSections collection:
        // contentSections.forEach(section => {
        //   if(section.id !== 'content-about') section.style.display = 'none';
        // });

        // Load content if it hasn't been loaded yet
        if (!contentAboutSection.dataset.loaded) {
          try {
            const response = await fetch('content/about.md');
            if (!response.ok) {
              console.error('Failed to load about.md: ' + response.statusText);
              contentAboutSection.innerHTML = '<p>Error loading content. Please try again later.</p>';
              return;
            }
            const markdownText = await response.text();
            contentAboutSection.innerHTML = marked.parse(markdownText);
            contentAboutSection.dataset.loaded = true; // Mark as loaded
          } catch (error) {
            console.error('Error fetching or parsing about.md: ', error);
            contentAboutSection.innerHTML = '<p>Error loading content. Please try again later.</p>';
          }
        }
      }

      function updateActiveNavUI(activePageName) {
        navLinks.forEach(link => {
          link.classList.remove('active');
        });
        // Only activate the "About" link in index.html's context
        if (activePageName === 'about') {
          const activeLink = document.querySelector('.nav-link[href="#about"]');
          if (activeLink) {
            activeLink.classList.add('active');
          }
        }
      }

      function applyPageStyles(pageName) {
        if (pageName !== 'about' || !contentAboutSection) {
            // If not 'about', or section not found, do nothing or reset styles
            if(contentAboutSection) {
                contentAboutSection.style.backgroundColor = ''; // Reset to default
                contentAboutSection.style.color = ''; // Reset to default
            }
            return;
        }

        // Apply styles for 'about' page
        contentAboutSection.style.backgroundColor = '#B056F0'; // Bright purple
        contentAboutSection.style.color = '#2E2E2E'; // New text color
      }

      function handleHashChange() {
        let currentHash = window.location.hash;

        // Always display 'about' content on index.html
        // The pageName variable is effectively always 'about' for this page.
        // No need to change window.location.hash if it's initially empty.
        // If it's '#about' or some other hash, the content displayed will still be 'about'.
        // The main goal is to avoid forcing '#about' into the URL if it's not there.

        loadContent('about');
        updateActiveNavUI('about');
        applyPageStyles('about');

        // If the hash was something other than #about (e.g. #speaking due to manual typing or old link)
        // and we want to ensure the URL eventually reflects that only 'about' is shown here,
        // we could redirect to #about. But the request is to avoid forcing it if it was empty.
        // If currentHash is not "" and not "#about", we can choose to update it to "#about".
        // However, for this specific requirement, we will only ensure 'about' content is loaded
        // and not modify the hash unless strictly necessary for user experience (which it isn't here).
        // The provided example logic simplifies this by always calling functions with 'about'.
        // If the hash was, for example, `index.html#speaking`, this page will show "About" content,
        // and the URL will remain `index.html#speaking` until the user navigates elsewhere.
        // This is acceptable as per the simplified logic focusing on content and not URL mutation for non-empty, non-"#about" hashes.
      }

      window.addEventListener('hashchange', handleHashChange);

      // Initial load handler:
      // Call handleHashChange on initial load to display 'about' content.
      // This will use the logic defined above, which avoids adding '#about' to the URL if it's initially empty.
      handleHashChange();
    });
  </script>
  </body>
</html>
