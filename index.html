<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Audrey Troutt</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
		<link href='http://fonts.googleapis.com/css?family=Cabin|Open+Sans|Lato:300,400,300italic|Vollkorn:400italic,400' rel='stylesheet' type='text/css'>
    <link href='stylesheets/style.css' rel='stylesheet' type='text/css'>
		<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
		<script src='javascripts/scrollReveal.js'></script>
	  <script>
	      window.scrollReveal = new scrollReveal();
	  </script>
    <script src="https://analytics.ahrefs.com/analytics.js" data-key="nIvdLXXYUGFBoBZE6PtVTg" async></script>
  </head>
  <body>
    <div class="content">
      <header>
        <h1>Audrey Troutt</h1>
        <p>Startup CTO & hands-on engineering leader building products, teams, and cultures that scale.</p>
        <nav id="main-nav">
          <a href="#about" class="nav-link">About</a>
          <a href="#speaking" class="nav-link">Speaking</a>
          <a href="#writing" class="nav-link">Writing</a>
          <a href="#teaching" class="nav-link">Teaching</a>
        </nav>
      </header>
      <!-- Content sections are now direct children of div.content -->
      <section id="content-about"></section>
      <section id="content-speaking"></section>
      <section id="content-writing"></section>
      <section id="content-teaching"></section>
      <footer>
        <ul>
          <li><a class="buttons github" href="https://github.com/atroutt">GitHub</a></li>
            <li><a class="buttons speakerdeck" href="https://speakerdeck.com/atroutt/">Speaker Deck</a></li>
            <li><a class="buttons linkedin" href="http://www.linkedin.com/in/audreytroutt">LinkedIn</a></li>
            <li><a class="buttons twitter" href="https://bsky.app/profile/auditty.bsky.social">Bluesky</a></li>
            <li><a class="buttons news" href="https://technical.ly/?s=audrey+troutt">News</a></li>
          </ul>
        </footer>
    <!-- The div.content closing tag was here, it should remain to wrap header, sections, and footer -->
    </div>
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>

    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-19828277-1");
    pageTracker._trackPageview();
    } catch(err) {}
    </script>
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const navLinks = document.querySelectorAll('.nav-link');
      const contentSections = document.querySelectorAll('div.content > section');

      async function loadContent(pageName) {
        const targetElementId = 'content-' + pageName;
        const targetElement = document.getElementById(targetElementId);

        if (!targetElement) {
          console.error('Target element ' + targetElementId + ' not found.');
          return;
        }

        // Hide all content sections first
        contentSections.forEach(section => {
          section.style.display = 'none';
        });

        // Show the target section
        targetElement.style.display = 'block';

        // Load content if it hasn't been loaded yet (simple check to prevent re-fetching)
        if (!targetElement.dataset.loaded) {
          try {
            const response = await fetch('content/' + pageName + '.md');
            if (!response.ok) {
              console.error('Failed to load ' + pageName + '.md: ' + response.statusText);
              targetElement.innerHTML = '<p>Error loading content. Please try again later.</p>';
              return;
            }
            const markdownText = await response.text();
            targetElement.innerHTML = marked.parse(markdownText);
            targetElement.dataset.loaded = true; // Mark as loaded
          } catch (error) {
            console.error('Error fetching or parsing ' + pageName + '.md: ', error);
            targetElement.innerHTML = '<p>Error loading content. Please try again later.</p>';
          }
        }
      }

      function updateActiveNavUI(activePageName) {
        navLinks.forEach(link => {
          link.classList.remove('active');
        });
        const activeLink = document.querySelector(`.nav-link[href="#${activePageName}"]`);
        if (activeLink) {
          activeLink.classList.add('active');
        }
      }

      function applyPageStyles(pageName) {
        const sectionId = 'content-' + pageName;
        const activeSection = document.getElementById(sectionId);
        if (!activeSection) return;

        // Reset styles for all sections first
        contentSections.forEach(s => {
          s.style.backgroundColor = ''; // Reset to default or CSS-defined
          s.style.color = ''; // Reset to default or CSS-defined
        });

        let bgColor, textColor;
        switch (pageName) {
          case 'about':
            bgColor = '#B056F0'; // Bright purple
            textColor = '#2E2E2E'; // New text color for better contrast
            break;
          case 'speaking':
            bgColor = '#969C6B'; // Muted olive
            textColor = '#FFFFFF';
            break;
          case 'writing':
            bgColor = '#936BB0'; // Muted purple
            textColor = '#FFFFFF';
            break;
          case 'teaching': // New colors for Teaching
            bgColor = '#DEF056'; // Lime
            textColor = '#434535';
            break;
          default:
            bgColor = '#FFFFFF'; // A neutral default (e.g., white)
            textColor = '#333333'; // Default text color
        }
        activeSection.style.backgroundColor = bgColor;
        activeSection.style.color = textColor;

        // Example: If headings within the active section need different color than paragraphs
        // activeSection.querySelectorAll('h1, h2, h3').forEach(header => header.style.color = textColor);
      }

      function handleHashChange() {
        let pageName = window.location.hash.substring(1);
        if (!pageName) {
          pageName = 'about'; // Default page
          window.location.hash = '#' + pageName; // Update URL hash if empty
        }
        loadContent(pageName);
        updateActiveNavUI(pageName);
        applyPageStyles(pageName); // Added call to apply styles
      }

      window.addEventListener('hashchange', handleHashChange);

      // Initial load handler
      handleHashChange();
    });
  </script>
  </body>
</html>
